<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>ICT Wiki</ion-title>
    <ion-buttons slot="end">
      <ion-button routerLink="/admin/login">
        <ion-icon slot="icon-only" name="settings-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <!-- Pull-to-refresh -->
  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <div class="home-container">
    <!-- Error Message -->
    <ion-card *ngIf="errorMessage && !loadingFeatured && !loadingLatest" color="danger">
      <ion-card-content>
        <p>{{ errorMessage }}</p>
        <ion-button expand="block" fill="outline" (click)="retry()">
          <ion-icon slot="start" name="refresh-outline"></ion-icon>
          Retry
        </ion-button>
      </ion-card-content>
    </ion-card>

    <!-- Featured Articles Section -->
    <section class="featured-section" *ngIf="loadingFeatured || featuredArticles.length > 0">
      <div class="section-header">
        <h2>Featured Articles</h2>
        <ion-icon name="star" color="warning"></ion-icon>
      </div>

      <!-- Loading State -->
      <app-skeleton-loader
        *ngIf="loadingFeatured"
        variant="article-card"
        [count]="3"
      ></app-skeleton-loader>

      <!-- Featured Articles -->
      <div *ngIf="!loadingFeatured">
        <app-article-card
          *ngFor="let article of featuredArticles"
          [article]="article"
        ></app-article-card>
      </div>
    </section>

    <!-- Latest Articles Section -->
    <section class="latest-section" *ngIf="loadingLatest || latestArticles.length > 0">
      <div class="section-header">
        <h2>Latest Articles</h2>
        <ion-icon name="time-outline"></ion-icon>
      </div>

      <!-- Loading State -->
      <app-skeleton-loader
        *ngIf="loadingLatest"
        variant="article-card"
        [count]="5"
      ></app-skeleton-loader>

      <!-- Latest Articles -->
      <div *ngIf="!loadingLatest">
        <app-article-card
          *ngFor="let article of latestArticles"
          [article]="article"
        ></app-article-card>
      </div>
    </section>

    <!-- Empty State -->
    <div class="empty-state" *ngIf="!loadingFeatured && !loadingLatest && featuredArticles.length === 0 && latestArticles.length === 0 && !errorMessage">
      <ion-icon name="document-text-outline" size="large"></ion-icon>
      <h3>No Articles Yet</h3>
      <p>Check back later for new content!</p>
    </div>
  </div>
</ion-content>
